<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Server</title>
    <style>
        :root{--bg:#f2f3f5;--card:#fff;--text:#23272a;--acc:#5865F2}
        body{font-family:'Segoe UI',sans-serif;background:var(--bg);margin:0;display:flex;flex-direction:column;align-items:center;min-height:100vh}
        
        header{background:linear-gradient(135deg,var(--acc),#4752c4);width:100%;padding:40px 20px;text-align:center;color:#fff;box-shadow:0 4px 15px rgba(88,101,242,.3)}
        h1{margin:0;font-size:2rem;font-weight:700}
        
        .logout-btn{position:absolute;top:20px;right:20px;text-decoration:none;color:white;background:rgba(0,0,0,0.2);padding:8px 16px;border-radius:20px;font-weight:bold;font-size:0.9rem;transition:0.2s}
        .logout-btn:hover{background:rgba(237,66,69,0.8)}

        .container {
            width: 90%; max-width: 800px; margin-top: -40px; z-index: 10;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;
        }

        .server-card {
            background: #fff; border-radius: 16px; padding: 30px;
            display: flex; flex-direction: column; align-items: center; text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); transition: transform 0.2s;
            text-decoration: none; color: inherit;
        }
        .server-card:hover { transform: translateY(-5px); }
        
        .server-icon {
            width: 90px; height: 90px; border-radius: 50%; background: #eee;
            object-fit: cover; margin-bottom: 20px; border: 4px solid #f8f9fa;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .no-icon { display: flex; align-items: center; justify-content: center; background: #5865F2; color: white; font-size: 2rem; font-weight: bold; }

        .badge {
            background: #eee; color: #555; padding: 4px 10px; border-radius: 20px;
            font-size: 0.75rem; text-transform: uppercase; font-weight: bold;
            margin-bottom: 15px; letter-spacing: 1px;
        }
        .badge-Main { background: #e3f2fd; color: #1976d2; }
        .badge-Appeals { background: #ffebee; color: #d32f2f; }

        h3 { margin: 0 0 10px; font-size: 1.4rem; color: #2c2f33; }
        
        .btn {
            margin-top: 25px; background: var(--acc); color: white; padding: 12px 0;
            border-radius: 8px; font-weight: 600; width: 100%; transition: 0.2s;
        }
        .server-card:hover .btn { background: #4752c4; }
    </style>
</head>
<body>
    <header>
        <a href="/logout" class="logout-btn">Logout</a>
        <h1>My Servers</h1>
        <p style="opacity:0.9;margin-top:5px">Select a server to manage</p>
        <div style="height:40px"></div>
    </header>

    <div class="container">
        <% if(guilds.length > 0) { %>
            <% guilds.forEach(g => { %>
                <a href="/manage/<%= g.id %>" class="server-card">
                    <span class="badge badge-<%= g.type %>"><%= g.type %> Server</span>
                    
                    <% if(g.icon) { %>
                        <img src="<%= g.icon %>" class="server-icon">
                    <% } else { %>
                        <div class="server-icon no-icon"><%= g.name.charAt(0) %></div>
                    <% } %>
                    
                    <h3><%= g.name %></h3>
                    <div class="btn">Manage Server</div>
                </a>
            <% }) %>
        <% } else { %>
            <div style="grid-column:1/-1;background:white;padding:40px;border-radius:16px;text-align:center">
                <h2>No servers found</h2>
                <p style="color:#72767d">Make sure the bot is invited and your ID is in the .env configuration.</p>
            </div>
        <% } %>
    </div>
</body>
</html>